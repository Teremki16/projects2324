let startTime;
let endTime;
let results = []

$("button").on("click", ()=>{
    startTime = $.now();
    exam(3)
})

function exam(q){
    let a = Math.floor(Math.random()*100)
    let b = Math.floor(Math.random()*100)
    let answer = a + b
    alertify.prompt(`–ó–∞–ø–∏—Ç–∞–Ω–Ω—è ${Math.abs(q - 4)}: ${a} + ${b} = ?`, function(e, val){
        if(e){
 if(answer == parseInt(val)){
    alertify.success(`–ü—Ä–∞–≤–∏–ª—å–Ω–æ, —Ç–∏ –º–æ–ª–æ–¥–µ—Ü—å!üëç`)
    q--
 }else{
    alertify.error(`–û—Ç –Ω–µ–≤–¥–∞—á–∞üò£, —Å–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑, –≤ —Ç–µ–±–µ –≤—Å–µ –≤–∏–π–¥–µ!`)
 }
 if(q == 0){
    endTime = $.now();
let t = (endTime - startTime)/1000
    alertify.alert(`–¢–∏ –≤–∏—Ç—Ä–∞—Ç–∏–≤ ${t} —Å–µ–∫—É–Ω–¥!üò®`)
    addResult(t);
 }else{
    exam(q)
 }
        }else{
            return 0
        }
    } )
}

function addResult(res){
    alertify.prompt('–Ø–∫ —Ç–µ–±–µ –∑–≤–∞—Ç–∏?', function(e, val){
        if(e){
   results.push({name: val, time: res})
   $("table").empty()
   $("table").append(`
   <tr>
    <th>Name</th>
    <th>Time</th>
   </tr>
`)
results.forEach((el)=>{
    $("table").append(`<tr><td>${el.name}</td><td>${el.time}</td></tr>`)
})
        }else{
            return 0
        }
    })

}

